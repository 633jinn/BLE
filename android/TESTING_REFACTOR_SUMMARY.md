# ν…μ¤ν… λ¦¬ν©ν† λ§ μ”μ•½

## κ°μ”
μ΄ λ¬Έμ„λ” BLE μ „μ†΅ μ• ν”λ¦¬μΌ€μ΄μ…μ„ Mockμ„ μ‚¬μ©ν•΄μ„ ν…μ¤νΈ κ°€λ¥ν•λ„λ΅ λ¦¬ν©ν† λ§ν• λ‚΄μ©μ„ μ”μ•½ν•λ©°, ν–¥ν›„ μ‚¬μ©μ„ μ„ν•΄ λ¨λ“  μ›λ³Έ κµ¬ν„ μ½”λ“λ¥Ό λ³΄μ΅΄ν–μµλ‹λ‹¤.

## π― λ‹¬μ„±ν• λ©ν‘

β… **κ΄€μ‹¬μ‚¬ λ¶„λ¦¬** - UI λ΅μ§μ΄ BLE ν•λ“μ›¨μ–΄ μμ΅΄μ„±κ³Ό λ¶„λ¦¬λ¨
β… **μ¶”μƒν™” λ„μ…** - μΈν„°νμ΄μ¤ κΈ°λ° μ„¤κ³„λ΅ μ‰¬μ΄ ν…μ¤ν…κ³Ό ν–¥ν›„ μμ • κ°€λ¥  
β… **μ›λ³Έ μ½”λ“ λ³΄μ΅΄** - λ¨λ“  μ‹¤μ  κµ¬ν„μ²΄λ” "λ‚μ¤‘μ— μ‹¤μ  λ΅μ§μ—μ„ μ‚¬μ©λ  μμ •"μΌλ΅ μ£Όμ„ μ²λ¦¬
β… **Mock κµ¬ν„μ²΄ μƒμ„±** - ν•λ“μ›¨μ–΄ μ—†μ΄ ν…μ¤νΈν•  μ μλ” μ™„μ „ν• κΈ°λ¥μ Mock
β… **λ‹¨μ„ ν…μ¤νΈ ν™μ„±ν™”** - Mock μ‚¬μ©μ„ λ³΄μ—¬μ£Όλ” μ™„μ „ν• ν…μ¤νΈ μ¤μ„νΈ
β… **κΈ°λ¥ μ μ§€** - μ•±μ΄ μ΄μ „κ³Ό λ™μΌν•κ² μ‘λ™ν•λ©°, μ΄μ  Mock λ°μ΄ν„°λ¥Ό μ‚¬μ©

## π—οΈ μ•„ν‚¤ν…μ² λ³€κ²½μ‚¬ν•­

### 1. **BLE μ¤μΊλ„ μ¶”μƒν™”**
- **μΈν„°νμ΄μ¤**: `BleScanner` - BLE μ¤μΊλ‹ κ³„μ•½ μ •μ
- **Mock κµ¬ν„μ²΄**: `MockBleScanner` - μμΈ΅ κ°€λ¥ν• λ°μ΄ν„°λ΅ BLE μ¤μΊλ‹ μ‹λ®¬λ μ΄μ…
- **μ‹¤μ  κµ¬ν„μ²΄**: `RealBleScanner` - Nordic Scanner λν•‘ (λ‚μ¤‘ μ‚¬μ©μ„ μ„ν•΄ μ£Όμ„ μ²λ¦¬)

### 2. **μ½λ°± μΈν„°νμ΄μ¤**
- **μΈν„°νμ΄μ¤**: `BleScanCallback` - μ¤μΊ” μ΄λ²¤νΈμ© ν‘μ¤€ν™”λ μ½λ°±
- **λ©”μ„λ“**: `onUserFound()`, `onScanFailed()`, `onScanStateChanged()`

### 3. **ν…μ¤νΈ κ°€λ¥ν• λ°μ΄ν„° λ¨λΈ**
- **TestableScannedUser**: λ‹¨μ„ ν…μ¤νΈμ© Android λ…λ¦½μ  λ²„μ „
- **MockScannedUserFactory**: μΌκ΄€λ ν…μ¤νΈ λ°μ΄ν„° μƒμ„±
- **μ›λ³Έ ScannedUser**: μ‹¤μ  Nordic ScanResult ν†µν•©κ³Ό ν•¨κ» λ³΄μ΅΄

### 4. **μμ΅΄μ„± μ£Όμ… κµ¬μ„±**
- **ScannerModule**: μ–΄λ–¤ κµ¬ν„μ²΄λ¥Ό μ‚¬μ©ν• μ§€ κµ¬μ„±ν•λ” Hilt λ¨λ“
- **κµ¬ν„μ²΄ μ „ν™**: λ¨λ“μ λ°”μΈλ”©λ§ λ³€κ²½ν•μ—¬ μ‹¤μ  vs Mock μ‚¬μ©

## π“ νμΌ κµ¬μ΅°

```
app/src/main/java/com/shinhan/ble/
β”β”€β”€ scanner/
β”‚   β”β”€β”€ BleScanner.kt              # μΈν„°νμ΄μ¤ μ •μ
β”‚   β”β”€β”€ BleScanCallback.kt         # μ½λ°± μΈν„°νμ΄μ¤  
β”‚   β”β”€β”€ MockBleScanner.kt          # Mock κµ¬ν„μ²΄
β”‚   β””β”€β”€ RealBleScanner.kt          # μ‹¤μ  κµ¬ν„μ²΄ (μ£Όμ„ μ²λ¦¬)
β”β”€β”€ data/
β”‚   β”β”€β”€ ScannedUser.kt             # μ›λ³Έ λ°μ΄ν„° ν΄λμ¤ (λ³΄μ΅΄)
β”‚   β”β”€β”€ TestableScannedUser.kt     # ν…μ¤νΈ μΉν™”μ  λ²„μ „
β”‚   β””β”€β”€ MockScannedUserFactory.kt  # ν…μ¤νΈ λ°μ΄ν„° μƒμ„±κΈ°
β”β”€β”€ di/
β”‚   β””β”€β”€ ScannerModule.kt           # Hilt κµ¬μ„±
β””β”€β”€ MainActivity.kt                # μ¶”μƒν™” μ‚¬μ©ν•λ„λ΅ λ¦¬ν©ν† λ§

app/src/test/java/com/shinhan/ble/
β”β”€β”€ scanner/
β”‚   β””β”€β”€ MockBleScannerTest.kt      # μ¤μΊλ„ λ™μ‘ ν…μ¤νΈ
β””β”€β”€ data/
    β””β”€β”€ MockScannedUserFactoryTest.kt # λ°μ΄ν„° λ¨λΈ ν…μ¤νΈ
```

## π”§ Mockκ³Ό μ‹¤μ  κµ¬ν„μ²΄ κ°„ μ „ν™ λ°©λ²•

### ν„μ¬ μ‚¬μ© μ¤‘: Mock κµ¬ν„μ²΄
```kotlin
// ScannerModule.ktμ—μ„
@Binds
@Singleton  
abstract fun bindBleScanner(mockBleScanner: MockBleScanner): BleScanner
```

### μ‹¤μ  κµ¬ν„μ²΄ μ‚¬μ©ν•λ ¤λ©΄:
```kotlin
// ScannerModule.ktμ—μ„ - μ΄κ²ƒμ μ£Όμ„μ„ ν•΄μ ν•κ³  μ„ μ½”λ“λ¥Ό μ£Όμ„ μ²λ¦¬
// @Binds
// @Singleton
// abstract fun bindBleScanner(realBleScanner: RealBleScanner): BleScanner
```

## π“± MainActivity λ³€κ²½μ‚¬ν•­

### μ›λ³Έ μ½”λ“ (μ£Όμ„μΌλ΅ λ³΄μ΅΄)
- μ§μ ‘μ μΈ Nordic Scanner μ‚¬μ©
- κ¶ν• μ²λ¦¬
- λΈ”λ£¨ν¬μ¤ μƒνƒ κ΄€λ¦¬
- ScanResult μ²λ¦¬

### μƒ μ½”λ“ (ν„μ¬ ν™μ„±ν™”)
- μ£Όμ…λ `BleScanner` μΈν„°νμ΄μ¤ μ‚¬μ©
- λ‹¨μν™”λ μ¤μΊλ‹ λ΅μ§
- μ¶”μƒν™”λ μ½λ°± μ²λ¦¬
- ν‘μ¤€ν™”λ μΈν„°νμ΄μ¤λ¥Ό ν†µν• UI μ—…λ°μ΄νΈ

### μ£Όμ” μ£Όμ„ μ²λ¦¬λ μ„Ήμ…λ“¤
```kotlin
// To be used in actual logic later - Real Bluetooth components
// To be used in actual logic later - Original Nordic scanner callback  
// To be used in actual logic later - Permission checking
// To be used in actual logic later - Real Bluetooth initialization
```

## π§ ν…μ¤ν… κΈ°λ¥

### λ‹¨μ„ ν…μ¤νΈ
- **TestableScannedUser**: Android μμ΅΄μ„± μ—†μ΄ λ°μ΄ν„° λ¨λΈ ν…μ¤νΈ
- **BleScanCallback**: ν…μ¤νΈ λ”λΈ”λ΅ μ½λ°± λ™μ‘ ν…μ¤νΈ
- **κ·Όμ ‘λ„ κ³„μ‚°**: RSSIμ—μ„ κ±°λ¦¬/λ λ²¨ λ³€ν™ ν…μ¤νΈ
- **μƒ‰μƒ μƒμ„±**: μΌκ΄€λ μƒ‰μƒ ν• λ‹Ή ν…μ¤νΈ

### Mock κΈ°λ¥
- **μμΈ΅ κ°€λ¥ν• λ°μ΄ν„°**: μ•λ ¤μ§„ μ†μ„±μ„ κ°€μ§„ μΌκ΄€λ ν…μ¤νΈ μ‚¬μ©μ
- **μ‹λ®¬λ μ΄μ…λ λ°κ²¬**: μ‹¤μ  μ¤μΊλ‹μ²λΌ μ‹κ°„μ΄ μ§€λ‚λ©΄μ„ μ‚¬μ©μ ν‘μ‹
- **RSSI μ‹λ®¬λ μ΄μ…**: UI ν…μ¤νΈμ© λ‹¤μ–‘ν• κ·Όμ ‘λ„ λ λ²¨
- **μλ™ μ μ–΄**: μ—£μ§€ μΌ€μ΄μ¤ ν…μ¤νΈμ© νΉμ • μ΄λ²¤νΈ νΈλ¦¬κ±°

### ν…μ¤νΈ μ‹¤ν–‰
```bash
./gradlew test  # λ¨λ“  λ‹¨μ„ ν…μ¤νΈ μ‹¤ν–‰
./gradlew assembleDebug  # ν„μ¬ κµ¬μ„±μΌλ΅ λΉλ“
```

## π€ μ¥μ 

### κ°λ°μ©
- **λΉ λ¥Έ κ°λ°**: κ°λ° μ¤‘ λ¬Όλ¦¬μ  BLE λ””λ°”μ΄μ¤ λ¶ν•„μ”
- **μΌκ΄€λ ν…μ¤ν…**: λ§¤λ² λ™μΌν• ν…μ¤νΈ λ°μ΄ν„°
- **UI ν…μ¤ν…**: μ•λ ¤μ§„ μ„μΉλ΅ κ·Όμ ‘λ„ μ‹κ°ν™” ν…μ¤νΈ
- **μ—£μ§€ μΌ€μ΄μ¤ ν…μ¤ν…**: μ¤μΊ” μ‹¤ν¨, μ—°κ²° λ¬Έμ  λ“± μ‹λ®¬λ μ΄μ…

### ν…μ¤ν…μ©
- **λ‹¨μ„ ν…μ¤νΈ κ°€λ¥**: Android λ°νƒ€μ„ μ—†λ” μμ Kotlin λ΅μ§
- **κ²©λ¦¬λ ν…μ¤ν…**: κ°λ³„ μ»΄ν¬λ„νΈλ¥Ό λ…λ¦½μ μΌλ΅ ν…μ¤νΈ
- **Mockλ μμ΅΄μ„±**: λ¨λ“  μ™Έλ¶€ μμ΅΄μ„± μ μ–΄
- **μλ™ν™”λ ν…μ¤ν…**: ν•λ“μ›¨μ–΄ μ—†μ΄ CI/CDμ—μ„ ν…μ¤νΈ μ‹¤ν–‰

### ν–¥ν›„ κ°λ°μ©
- **μ‰¬μ΄ μ „ν™**: ν• μ¤„ λ³€κ²½μΌλ΅ μ‹¤μ  κµ¬ν„μ²΄λ΅ μ „ν™
- **νΈν™μ„± μ μ§€**: λ¨λ“  μ›λ³Έ μ½”λ“ λ³΄μ΅΄
- **ν™•μ¥ κ°€λ¥**: μƒλ΅μ΄ μ¤μΊλ„ κµ¬ν„μ²΄ μ‰½κ² μ¶”κ°€
- **λ””λ²„κΉ… κ°€λ¥**: Mockκ³Ό μ‹¤μ  λ™μ‘ κ°„ λ…ν™•ν• λ¶„λ¦¬

## π“‹ λ‹¤μ λ‹¨κ³„

1. **Mock κµ¬ν„μ²΄λ΅ κ°λ° κ³„μ†**
2. **κΈ°λ¥ κµ¬μ¶•μ— λ”°λΌ λ” λ§μ€ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤ μ¶”κ°€**
3. **ν•λ“μ›¨μ–΄ ν…μ¤νΈ μ¤€λΉ„ μ‹ μ‹¤μ  κµ¬ν„μ²΄λ΅ μ „ν™**
4. **λ‹¤λ¥Έ BLE μ‘μ—…μ© μ¶”μƒν™” ν™•μ¥** (μ—°κ²°, μ „μ†΅ λ“±)
5. **μ—¬λ¬ μ»΄ν¬λ„νΈλ¥Ό κ²°ν•©ν• ν†µν•© ν…μ¤νΈ μ¶”κ°€**

μ½”λ“λ² μ΄μ¤λ” μ΄μ  ν”„λ΅λ•μ… μ‚¬μ©μ„ μ„ν• λ¨λ“  μ›λ³Έ κΈ°λ¥μ„ μ μ§€ν•λ©΄μ„ κ°•λ ¥ν• ν…μ¤ν…μ΄ κ°€λ¥ν•λ„λ΅ μ¤€λΉ„λμ—μµλ‹λ‹¤.